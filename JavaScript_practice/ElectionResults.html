<!DOCTYPE html>
<html>
<head><title>Election Results</title>
<meta charset="utf-8"/>
<script src = "D3/d3.min.js"></script>
<script src = "https://d3js.org/d3.v5.min.js"></script>
<style>
@media (min-width: 280px) {body {font-size: 12px;} }
@media (min-width: 320px) {body {font-size: 14px;} }
@media (min-width: 423px) {body {font-size: 17px;} }
@media (min-width: 526px) {body {font-size: 20px;} }
@media (min-width: 768px) {body {font-size: 23px;} }
@media (min-width: 992px) {body {font-size: 28px;} }
@media (min-width: 1200px) {body {font-size: 34px;} }

body {
    font-family: arial, verdana, sans-serif;
    text-align: center;
}
.title{
    font-size: 1.6em;
}
.radio-btn-list{
    font-size: 0.8em;
    display: inline-block;
    margin-top: 1em;
}
#radio-btns{
    text-align: left;
}
.title-data{
    font-size: 1.1em;
    font-weight: bold;
    margin-top: 1em;
}
.graph{
    margin-top: 0.5em;
    background-color: #aaaaaa;
    display: inline-block;
    height: 16em;
}
.seats-bar{
    float: left;
    background-color: #eeeeee;
    width: 2.5em;
}
</style>
</head>
<body>
<div class="title">Election Results</div>
<div class="radio-btn-list">
    <form id="radio-btns">
	      <div>
				<input type="radio" name="results" onClick="handleRadioBtns('Canada Election 2015', electionDataCan, seatsScaleCan)" value="can2018" checked> Canada Election 2015
			</div>
		  <div>
				<input type="radio" name="results" onClick="handleRadioBtns('Ontario Election 2018', electionDataOnt, seatsScaleOnt)" value="ont2018" > Ontario Election 2018
		   </div>
			<div>
				<input type="radio" name="results" onClick="handleRadioBtns('New Brunswick Election 2018', electionDataNB, seatsScaleNB)" value="nb2018"> New Brunswick Election 2018
			</div>		
    </form>
</div>	
	
<div class="title-data" id="title-data"></div>
<div class="graph"> 
	 <div id= "seats-bar-list"></div>
     <div style="clear:both"></div>
</div>

<script type="text/javascript">

let electionDataNB = [];
let electionDataOnt = [];
let electionDataCan = [];
const seatsGraphHeightFactor = 16;
const seatsBarHeightFactor = 1.15;

d3.csv("/Data/ElectionResults_2018_Ont.csv", function(data) {
  console.log(data[0]);
}); 


electionDataOnt[0] = {party:"PC", seats:76, popvote:40.6, colour:"#00f"};
electionDataOnt[1] = {party:"NDP", seats:40, popvote:33.7, colour:"#f72"};
electionDataOnt[2] = {party:"Lib", seats:7, popvote:19.3, colour:"#f00"};
electionDataOnt[3] = {party:"Grn", seats:1, popvote:4.6, colour:"#0c0"};

electionDataNB[0] = {party:"PC", seats:22, popvote:31.9, colour:"#00f"};
electionDataNB[1] = {party:"Lib", seats:21, popvote:37.8, colour:"#f00"};
electionDataNB[2] = {party:"Grn", seats:3, popvote:11.9, colour:"#0c0"};
electionDataNB[3] = {party:"PA", seats:3, popvote:12.6, colour:"#80f"};

electionDataCan[0] = {party:"lib", seats:184, popvote:39.5, colour:"#f00"};
electionDataCan[1] = {party:"Con", seats:99, popvote:31.9, colour:"#00f"};
electionDataCan[2] = {party:"NDP", seats:44, popvote:19.7, colour:"#f72"};
electionDataCan[3] = {party:"BQ", seats:10, popvote:4.7, colour:"#0ff"};
electionDataCan[4] = {party:"Grn", seats:1, popvote:3.5, colour:"#0f0"};


seatsScaleOnt = (electionDataOnt[0].seats * seatsBarHeightFactor)/seatsGraphHeightFactor;
seatsScaleNB = (electionDataNB[0].seats * seatsBarHeightFactor)/seatsGraphHeightFactor;
seatsScaleCan = (electionDataCan[0].seats * seatsBarHeightFactor)/seatsGraphHeightFactor;

	  
handleRadioBtns('Canada Election 2015', electionDataCan, seatsScaleCan);
  

function handleRadioBtns(election, electData, seatsScale){
      let columns = '';
      document.getElementById("title-data").innerHTML = election;
	  
	  for(let i=0; i<electData.length; i++){
	     columns +=  `<div class="seats-bar"> </div>`
      }
	  
	  document.getElementById("seats-bar-list").innerHTML = columns;
	
	   d3.selectAll(".seats-bar") 
		  .data(electData)   
			  .style("height", function(d) { return d.seats/seatsScale + "em"; }) 
			  .style("background-color",function(d) {return d.colour;})
			  .style("margin-top",function(d) {return seatsGraphHeightFactor-(d.seats/seatsScale) + "em";});

}

 
</script>

</body>
</html>
